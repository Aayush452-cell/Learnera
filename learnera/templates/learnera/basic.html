<!DOCTYPE html>
<html lang="en">

{% load socialaccount %}

<head>

    {% load static %}
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
          integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>

    <title>Hello, world!</title>

    {% block head %}
    {% endblock %}
</head>
<style>

    .avatar {
        vertical-align: middle;
        margin-top: 7px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
    }

    body {
        overflow-x: hidden;
    }

    .google-sign {
        max-width: 300px;
        margin-left: 80px;
    }

    .navbar-expand-lg {
        height: 50px;
    }

    nav {
        position: absolute;
    }

    .btn-outline-success {
        color: #fff;
        border-color: #28a745;
    }

    .navbar-brand img {
        height: auto;
        width: auto;
        max-height: 61px;
        max-width: 195px;
    }


    .navbar .megamenu {
        padding: 1rem;
    }

    /* ============ desktop view ============ */
    @media all and (min-width: 992px) {

        .navbar .has-megamenu {
            position: static !important;
        }

        .navbar .megamenu {
            left: 0;
            right: 0;
            width: 100%;
            margin-top: 0;
        }

    }

    /* ============ desktop view .end// ============ */

    /* ============ mobile view ============ */
    @media (max-width: 991px) {
        .navbar.fixed-top .navbar-collapse, .navbar.sticky-top .navbar-collapse {
            max-height: 90vh;
            margin-top: 10px;
            z-index: 1;
        }

        html,
        body {
            overflow-x: hidden;
        }

        .google-sign {
            max-width: 300px;
            margin-left: 45px;
        }

        .card-title-text-container {
            padding-bottom: 70%
        }

        .navbar-brand img {
            height: auto;
            width: auto;
            max-height: 41px;
            max-width: 79px;
        }


        .navbar-collapse {
            position: absolute !important;

            top: 4rem;
            right: 2rem;
            background-color: #2f3542;
            width: 15rem;
            z-index: 1;
        }

    }

    {% block css %}{% endblock %}
</style>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="#"><img src="{% static 'learnera/l1.png' %}" class="d-inline-block align-top"
                                              alt=""/></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main_nav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main_nav">
            <ul class="navbar-nav">
                <li class="nav-item active"><a class="nav-link" href="/learnera/">Home </a></li>
                <li class="nav-item"><a class="nav-link" href="/learnera/about"> About </a></li>
                <li class="nav-item"><a class="nav-link" href="/learnera/contact"> Contact Us </a></li>
                <li class="nav-item dropdown has-megamenu" style="z-index: 1">
                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"> Mega menu </a>
                    <div class="dropdown-menu megamenu" role="menu">
                        <div class="row g-3">
                            <div class="col-lg-3 col-6">
                                <div class="col-megamenu">
                                    <h6 class="title">Title Menu One</h6>
                                    <ul class="list-unstyled">
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                    </ul>
                                </div>  <!-- col-megamenu.// -->
                            </div><!-- end col-3 -->
                            <div class="col-lg-3 col-6">
                                <div class="col-megamenu">
                                    <h6 class="title">Title Menu Two</h6>
                                    <ul class="list-unstyled">
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                    </ul>
                                </div>  <!-- col-megamenu.// -->
                            </div><!-- end col-3 -->
                            <div class="col-lg-3 col-6">
                                <div class="col-megamenu">
                                    <h6 class="title">Title Menu Three</h6>
                                    <ul class="list-unstyled">
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                    </ul>
                                </div>  <!-- col-megamenu.// -->
                            </div>
                            <div class="col-lg-3 col-6">
                                <div class="col-megamenu">
                                    <h6 class="title">Title Menu Four</h6>
                                    <ul class="list-unstyled">
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                        <li><a href="#">Custom Menu</a></li>
                                    </ul>
                                </div>  <!-- col-megamenu.// -->
                            </div><!-- end col-3 -->
                        </div><!-- end row -->
                    </div> <!-- dropdown-mega-menu.// -->
                </li>
            </ul>
            <ul class="navbar-nav ms-auto">
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search"/>
                    <button class="btn btn-outline-success my-2 my-sm-0" style="background: hsl(9, 87%, 57%)"
                            type="submit">
                        Search
                    </button>
                </form>

                <button type="button" class="btn btn-secondary my-sm-2 mx-1" id="popcart" data-container="body"
                        data-toggle="popover"
                        data-placement="bottom" data-html="true"
                        data-content="There is nothing in your cart right now . Buy some courses !"
                        style="background: hsl(9, 87%, 57%);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-cart3" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path>
                    </svg>
                    cart(<span id="cart">0</span>)
                </button>


                {% if user.is_authenticated %}
                    <a href="/learnera/dashboard/{{ user.socialaccount_set.all.0.extra_data.id }}"><img src="{{ user.socialaccount_set.all.0.extra_data.picture }}" class="avatar"> </a>
                {% else %}

                    <!--Log In modal-->
                    <button type="submit" class="btn btn-outline-success my-sm-2 mr-1" data-toggle="modal"
                            style="background-color: hsl(9, 87%, 57%);" data-target="#loginModal">
                        Login
                    </button>



                    <!-- Button trigger modal -->
                    <button type="submit" class="btn btn-outline-success my-sm-2"
                            style="background-color: hsl(9, 87%, 57%);"
                            data-toggle="modal" data-target="#signupModal">
                        SignUp
                    </button>

                    <!-- Sign Up modal -->
                    <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModal"
                         aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content" style="background-color: rgb(235, 243, 255)">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="signupModalTitle">SignUp Here</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>

                                <div class="modal-body">
                                    <div>


                                        <a href="{% provider_login_url 'google' %}">
                                            <img src="{% static 'learnera/google.png' %}" class="google-sign" alt=""/>
                                        </a>
                                    </div>


                                    <form action="/signup" method='post'>
                                        <div class="form-group">
                                            <label for="username">Username</label>
                                            <input type="text" class="form-control" id="username" name="username"
                                                   placeholder="Choose a unique username">
                                        </div>
                                        <div class="form-group">
                                            <label for="fname">First Name</label>
                                            <input type="text" class="form-control" id="fname" name="fname"
                                                   placeholder="Enter Your First Name">
                                        </div>
                                        <div class="form-group">
                                            <label for="lname">Last Name</label>
                                            <input type="text" class="form-control" id="lname" name="lname"
                                                   placeholder="Enter Your Last Name">
                                        </div>
                                        <div class="form-group">
                                            <label for="email">Email address</label>
                                            <input type="email" class="form-control" id="email" name="email"
                                                   placeholder="name@example.com">
                                        </div>
                                        <div class="form-group">
                                            <label for="pass1">Choose a password</label>
                                            <input type="password" class="form-control" id="pass1" name="pass1"
                                                   placeholder="Choose Your Password">
                                        </div>
                                        <div class="form-group">
                                            <label for="pass2">Confirm Password</label>
                                            <input type="password" class="form-control" id="pass2" name="pass2"
                                                   placeholder="Enter your password again">
                                        </div>


                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModal"
                         aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content" style="background-color: rgb(235, 243, 255);">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="loginModalTitle">Login Here</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="form-group">
                                            <label for="username">Username</label>
                                            <input type="text" class="form-control" id="loginusername"
                                                   name="loginusername"
                                                   placeholder="Choose a unique username">
                                        </div>
                                        <div class="form-group">
                                            <label for="pass">Enter your password </label>
                                            <input type="password" class="form-control" id="pass" name="pass"
                                                   placeholder="Enter your password ">
                                        </div>

                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                </div>
                            </div>
                        </div>
                    </div>

                {% endif %}
            </ul>
        </div> <!-- navbar-collapse.// -->
    </div> <!-- container-fluid.// -->
</nav>

{% block body %}{% endblock %}

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        /////// Prevent closing from click inside dropdown
        document.querySelectorAll('.dropdown-menu').forEach(function (element) {
            element.addEventListener('click', function (e) {
                e.stopPropagation();
            });
        })
    });
    // DOMContentLoaded  end


        $('#popcart').popover();
        showpop();


        var flag =false;
        var checkoutpage=false;

        if(window.location.pathname =='/learnera/checkout/')
            checkoutpage=true;

        if(checkoutpage==true)
        {
            updatecheckoutpage();
        }

        function showpop() {
            var cart = JSON.parse(localStorage.getItem('cart'));
            var popStr = "";
            popStr = popStr + "<h5> Courses you have in your cart right now ! </h5><div class='mx-2 my-2'>";
            var i = 1;
            var tot_cost = 0;
            for (var item in cart) {
                popStr = popStr + "<b>" + i + "</b>.";
                popStr = popStr + cart[item][0].slice(0, 19) + "...   Rs " + cart[item][1] + '<br>';
                i = i + 1;
                tot_cost = tot_cost + parseInt(cart[item][1]);
            }
            document.getElementById('cart').innerHTML = i-1;
            popStr = popStr + "<hr>" + "Total Amount : Rs " + tot_cost;
            popStr = popStr + "</div> <a href='/learnera/checkout'><button class='btn btn-primary' id ='checkout'>Checkout</button></a> <button class='btn btn-primary' onclick='clearCartother()' id ='clearCart'>Clear Cart</button>";
            document.getElementById('popcart').setAttribute('data-content', popStr);
            //var myPopover = document.getElementById('popcart')
            //myPopover.show();

            document.getElementById('popcart').click();

            $('#popcart').popover();
        }

        function clearCartother(){
            cart = JSON.parse(localStorage.getItem('cart'));
            localStorage.clear();
            cart = {};
            flag = true;
            showpop(cart);
            if(checkoutpage==true)
            {
                $('#cartList').remove();
                document.location= "/learnera";
            }
        }

    {% block js %}{% endblock %}

</script>
</body>

</html>